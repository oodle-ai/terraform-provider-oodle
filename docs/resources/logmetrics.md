---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "oodle_logmetrics Resource - oodle"
subcategory: ""
description: |-
  
---

# oodle_logmetrics (Resource)



## Example Usage

```terraform
# Example of a resource that creates LogMetrics
resource "oodle_logmetrics" "coverage" {
  name = "tf_app_coverage"

  labels = [
    {
      name  = "environment"
      value = "prod"
    },
    {
      name = "container"
      value_extractor = {
        field = "container_name"
      }
    },
    {
      name = "service",
      value_extractor = {
        field     = "log"
        json_path = "service.id"
      }
    },
    {
      name = "step",
      value_extractor = {
        field = "message"
        regex = "step=(\\w+)"
      }
    }
  ]

  filter = {
    any = [
      {
        all = [
          {
            match = {
              field    = "level"
              operator = "is"
              value    = "error"
            },
          },
          {
            match = {
              field    = "container"
              operator = "matches regex"
              value    = "(checkout|payment)"
            },
          },
          {
            match = {
              field     = "log"
              operator  = "contains"
              json_path = "service.id"
              value     = "123"
            },
          },
          {
            match = {
              field    = "namespace"
              operator = "exists"
            }
          }
        ],
      },
      {
        not = {
          match = {
            field    = "container"
            operator = "is"
            value    = "otel-demo"
          }
        }
      }
    ]
  }

  metric_definitions = [
    {
      name = "oodle_logs_app_log_count"
      type = "count"
    },
    {
      name  = "oodle_logs_app_thread_count"
      type  = "gauge"
      field = "thread_count"
    },
    {
      name      = "oodle_logs_app_duration"
      type      = "histogram"
      field     = "log",
      json_path = "duration"
    },
    {
      name  = "oodle_logs_app_step_count"
      type  = "counter"
      field = "step",
      regex = "step=(\\w+)"
    }
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `metric_definitions` (Attributes List) Definitions of metrics to be created from the logs. (see [below for nested schema](#nestedatt--metric_definitions))
- `name` (String) Name of the log metrics rule.

### Optional

- `filter` (Attributes) Filter to determine which logs to process. (see [below for nested schema](#nestedatt--filter))
- `labels` (Attributes List) Labels to be added to all metrics created by this configuration. (see [below for nested schema](#nestedatt--labels))

### Read-Only

- `id` (String) ID of the log metrics rule.

<a id="nestedatt--metric_definitions"></a>
### Nested Schema for `metric_definitions`

Required:

- `name` (String) Name of the metric to be created. Must match Prometheus metric naming rules.
- `type` (String) Type of metric to create. Possible values are:
  - `log_count` - Counts the number of logs that match the filter.
  - `counter` - Extracts and sums numeric values from fields.
  - `gauge` - Records the latest numeric value from fields.
  - `histogram` - Creates distribution buckets of numeric values from fields.

Optional:

- `field` (String) Name of the log field to extract from. Only used when type is not 'log_count'.
- `json_path` (String) JSONPath to extract a numeric value from a JSON field. Cannot be used together with regex.
- `regex` (String) Regex pattern to extract a numeric value from the field. Cannot be used together with json_path.


<a id="nestedatt--filter"></a>
### Nested Schema for `filter`

Optional:

- `all` (Attributes List) List of filters where all must match. (see [below for nested schema](#nestedatt--filter--all))
- `any` (Attributes List) List of filters where at least one must match. (see [below for nested schema](#nestedatt--filter--any))
- `match` (Attributes) Simple field matching filter. (see [below for nested schema](#nestedatt--filter--match))
- `not` (Attributes) Filter that must not match. (see [below for nested schema](#nestedatt--filter--not))

<a id="nestedatt--filter--all"></a>
### Nested Schema for `filter.all`

Optional:

- `match` (Attributes) Simple field matching filter. (see [below for nested schema](#nestedatt--filter--all--match))
- `not` (Attributes) Filter that must not match. (see [below for nested schema](#nestedatt--filter--all--not))

<a id="nestedatt--filter--all--match"></a>
### Nested Schema for `filter.all.match`

Required:

- `field` (String) Name of the log field to match against.
- `operator` (String) Operator to use for matching. Possible values are: 'is', 'contains', 'matches regex', 'exists'.

Optional:

- `json_path` (String) JSONPath to match against a value at a specific path in the JSON field.
- `value` (String) Value to match against.


<a id="nestedatt--filter--all--not"></a>
### Nested Schema for `filter.all.not`

Optional:

- `match` (Attributes) Simple field matching filter. (see [below for nested schema](#nestedatt--filter--all--not--match))

<a id="nestedatt--filter--all--not--match"></a>
### Nested Schema for `filter.all.not.match`

Required:

- `field` (String) Name of the log field to match against.
- `operator` (String) Operator to use for matching. Possible values are: 'is', 'contains', 'matches regex', 'exists'.

Optional:

- `json_path` (String) JSONPath to match against a value at a specific path in the JSON field.
- `value` (String) Value to match against.




<a id="nestedatt--filter--any"></a>
### Nested Schema for `filter.any`

Optional:

- `all` (Attributes List) List of filters where all must match. (see [below for nested schema](#nestedatt--filter--any--all))
- `match` (Attributes) Simple field matching filter. (see [below for nested schema](#nestedatt--filter--any--match))
- `not` (Attributes) Filter that must not match. (see [below for nested schema](#nestedatt--filter--any--not))

<a id="nestedatt--filter--any--all"></a>
### Nested Schema for `filter.any.all`

Optional:

- `match` (Attributes) Simple field matching filter. (see [below for nested schema](#nestedatt--filter--any--all--match))
- `not` (Attributes) Filter that must not match. (see [below for nested schema](#nestedatt--filter--any--all--not))

<a id="nestedatt--filter--any--all--match"></a>
### Nested Schema for `filter.any.all.match`

Required:

- `field` (String) Name of the log field to match against.
- `operator` (String) Operator to use for matching. Possible values are: 'is', 'contains', 'matches regex', 'exists'.

Optional:

- `json_path` (String) JSONPath to match against a value at a specific path in the JSON field.
- `value` (String) Value to match against.


<a id="nestedatt--filter--any--all--not"></a>
### Nested Schema for `filter.any.all.not`

Optional:

- `match` (Attributes) Simple field matching filter. (see [below for nested schema](#nestedatt--filter--any--all--not--match))

<a id="nestedatt--filter--any--all--not--match"></a>
### Nested Schema for `filter.any.all.not.match`

Required:

- `field` (String) Name of the log field to match against.
- `operator` (String) Operator to use for matching. Possible values are: 'is', 'contains', 'matches regex', 'exists'.

Optional:

- `json_path` (String) JSONPath to match against a value at a specific path in the JSON field.
- `value` (String) Value to match against.




<a id="nestedatt--filter--any--match"></a>
### Nested Schema for `filter.any.match`

Required:

- `field` (String) Name of the log field to match against.
- `operator` (String) Operator to use for matching. Possible values are: 'is', 'contains', 'matches regex', 'exists'.

Optional:

- `json_path` (String) JSONPath to match against a value at a specific path in the JSON field.
- `value` (String) Value to match against.


<a id="nestedatt--filter--any--not"></a>
### Nested Schema for `filter.any.not`

Optional:

- `match` (Attributes) Simple field matching filter. (see [below for nested schema](#nestedatt--filter--any--not--match))

<a id="nestedatt--filter--any--not--match"></a>
### Nested Schema for `filter.any.not.match`

Required:

- `field` (String) Name of the log field to match against.
- `operator` (String) Operator to use for matching. Possible values are: 'is', 'contains', 'matches regex', 'exists'.

Optional:

- `json_path` (String) JSONPath to match against a value at a specific path in the JSON field.
- `value` (String) Value to match against.




<a id="nestedatt--filter--match"></a>
### Nested Schema for `filter.match`

Required:

- `field` (String) Name of the log field to match against.
- `operator` (String) Operator to use for matching. Possible values are: 'is', 'contains', 'matches regex', 'exists'.

Optional:

- `json_path` (String) JSONPath to match against a value at a specific path in the JSON field.
- `value` (String) Value to match against.


<a id="nestedatt--filter--not"></a>
### Nested Schema for `filter.not`

Optional:

- `match` (Attributes) Simple field matching filter. (see [below for nested schema](#nestedatt--filter--not--match))

<a id="nestedatt--filter--not--match"></a>
### Nested Schema for `filter.not.match`

Required:

- `field` (String) Name of the log field to match against.
- `operator` (String) Operator to use for matching. Possible values are: 'is', 'contains', 'matches regex', 'exists'.

Optional:

- `json_path` (String) JSONPath to match against a value at a specific path in the JSON field.
- `value` (String) Value to match against.




<a id="nestedatt--labels"></a>
### Nested Schema for `labels`

Required:

- `name` (String) Name of the label.

Optional:

- `value` (String) Static value of the label. Only one of value or value_extractor should be set.
- `value_extractor` (Attributes) Configuration for extracting label values from log fields. (see [below for nested schema](#nestedatt--labels--value_extractor))

<a id="nestedatt--labels--value_extractor"></a>
### Nested Schema for `labels.value_extractor`

Optional:

- `field` (String) Name of the field in the log to extract the value from.
- `json_path` (String) JSONPath to extract a nested value from a JSON field.
- `regex` (String) Regex pattern to extract a value from the field.

## Import

Import is supported using the following syntax:

```shell
# Import an existing log metrics rule using its UUID
terraform import oodle_logmetrics.app_metrics 123e4567-e89b-12d3-a456-426614174000
```
